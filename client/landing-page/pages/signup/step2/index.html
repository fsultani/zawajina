<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Registration</title>

    <!-- Global styles -->
    <link rel="stylesheet" type="text/css" href="/static/client/landing-page/global-css/styles.css">
    <link rel="stylesheet" type="text/css" href="/static/client/landing-page/components/Nav/styles.css">

    <!-- Font Icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Page styles -->
    <link rel="stylesheet" href="/static/client/landing-page/pages/signup/step2/styles.css">
  </head>
  <body>
    <div class="signup-container">
      <div w3-include-html="/static/client/landing-page/components/Nav/index.html"></div>
      <section>
        <div class="signup-wrapper">
          <h4 id="signup-success">You have successfully registered!</h4>
          <div class="signup-content">
            <form name="signupForm" onsubmit="return false" novalidate>
              <h2 class="form-title">Register</h2>

              <div class="form-row">
                <div class="dob-container form-group form-icon">
                  <label for="birth_date">Birth date</label>
                  <div class="dob-wrapper">
                    <select class="form-control form-control-sm" onchange="handleBirthMonth(event)">
                      <option selected disabled>Month</option>
                      <option value="january">January</option>
                      <option value="february">February</option>
                      <option value="march">March</option>
                      <option value="april">April</option>
                      <option value="may">May</option>
                      <option value="june">June</option>
                      <option value="july">July</option>
                      <option value="august">August</option>
                      <option value="september">September</option>
                      <option value="october">October</option>
                      <option value="november">November</option>
                      <option value="december">December</option>
                    </select>
                    <select
                      class="form-control form-control-sm"
                      id="dob-day"
                      onchange="handleBirthDay(event)"
                    >
                      <script type="module">
                        import { birthDay } from "/static/client/landing-page/pages/signup/step2/js/helpers.js";
                        birthDay();
                      </script>
                    </select>
                    <select class="form-control form-control-sm" id="dob-year" onchange="handleBirthYear(event)">
                      <script type="module">
                        import { birthYear } from "/static/client/landing-page/pages/signup/step2/js/helpers.js";
                        birthYear();
                      </script>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="gender-container form-radio">
                  <label for="gender">Gender</label>
                  <div class="form-flex">
                    <input
                      type="radio"
                      name="gender"
                      id="male"
                      onchange="handleGender('male')"
                    />
                    <label for="male">Male</label>
                    <input
                      type="radio"
                      name="gender"
                      id="female"
                      onchange="handleGender('female')"
                    />
                    <label for="female">Female</label>
                  </div>
                </div>
              </div>

              <div class="form-row">
                <select
                  class="form-control form-control-md"
                  id="countries-list"
                  onchange="handleCountrySelection(event)"
                >
                  <script type="module">
                    import { countriesList } from "/static/client/landing-page/pages/signup/step2/js/helpers.js";
                    countriesList();
                  </script>
                </select>
              </div>

              <div class="form-row" id="displayStates">
                <select
                  class="form-control form-control-md"
                  id="states-list"
                  onchange="handleStateSelection(event)"
                >
                </select>
              </div>

              <div class="form-row">
                <select
                  class="form-control form-control-md"
                  id="cities-list"
                  onchange="handleCitySelection(event)"
                >
                  <option selected disabled>City</option>
                </select>
              </div>

              <input type="file" id="real-file" hidden="hidden" />
              <div class="image-upload-container">
                <div id="custom-button"></div>
                <div id="image-upload">
                  <img src="" class="image-preview">
                </div>
                <div class="remove-image"></div>
                <div class="processing_bar"></div>
                <div class="success_box"></div>
              </div>
              <span id="custom-text"></span>
              <script type="text/javascript">
                const realFileButton = document.getElementById("real-file");
                const customButton = document.getElementById("custom-button");
                const imageUpload = document.getElementById("image-upload");
                const imagePreview = document.querySelector(".image-preview");
                const removeImageButtom = document.querySelector(".remove-image");
                const processingBar = document.querySelector(".processing_bar");
                const successBox = document.querySelector(".success_box");

                customButton.addEventListener("click", () => {
                  realFileButton.click();
                })

                realFileButton.addEventListener("change", event => {
                  if (event.target.files.length > 0) {
                    const uploadedFile = URL.createObjectURL(event.target.files[0]);
                    imagePreview.src = uploadedFile;
                    imagePreview.style.display = "block";
                    customButton.style.display = "none";
                    imageUpload.classList.add("display-image");

                    let width = 1;
                    let identity = setInterval(frame, 10);
                    function frame() {
                      if (width < 131) {
                        width++;
                        processingBar.style.width = `${width}px`;
                      } else {
                        clearInterval(identity);
                        document.querySelector(".display-image").style.opacity = 1;
                        successBox.style.display = "inline-block";
                        processingBar.style.transition = "0.75s";
                        processingBar.style.transitionDelay = "2.25s";
                        processingBar.style.opacity = 0;
                        setTimeout(() => {
                          successBox.style.display = "none";
                          removeImageButtom.style.display = "block";
                        }, 3000)
                      }
                    }
                  }
                })

                removeImageButtom.addEventListener("click", event => {
                  imagePreview.src = "";
                  imagePreview.style.display = "none";
                  imageUpload.classList.remove("display-image");
                  customButton.style.display = "block";

                  processingBar.style.opacity = "";
                  processingBar.style.transition = "";
                  processingBar.style.width = "";

                  removeImageButtom.style.display = "none";
                })
              </script>

              <div class="form-group">
                <button
                  type="submit"
                  onclick="handleCreateNewAccount()"
                  class="form-submit signup-button"
                  name="signupButton"
                >
                  Sign Up
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </div>

    <script type="text/javascript" src="/static/client/landing-page/pages/signup/step2/js/includeHTML.js"></script>
    <script type="text/javascript" src="/static/client/landing-page/pages/signup/step2/js/handleCreateNewAccount.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@beta/dist/js.cookie.min.js"></script>
  </body>
  <!-- This templates was made by Colorlib (https://colorlib.com) -->
</html>
